import{i as l,a as h}from"./lit-element-CzkqXGGu.js";import{A as r,e as o,u as a}from"./static-CzM4uoyW.js";import{t as c}from"./auro-radio-1hfMn5UE.js";import{A as u}from"./validation-DrYD_Tc9.js";import{A as p,f,a as m}from"./version-CcLPgAjI.js";const g=l`:host{display:block;padding-bottom:var(--ds-size-150, 0.75rem)}fieldset{all:unset}.displayFlex legend+slot{display:flex;white-space:nowrap}legend{margin-bottom:var(--ds-size-150, 0.75rem)}.hidden{display:none}[auro-helptext]{margin-top:var(--ds-size-150, 0.75rem)}`,b=l`:host legend{color:var(--ds-auro-radio-group-label-color)}:host([disabled]){--ds-auro-radio-group-label-color: var(--ds-basic-color-texticon-disabled, #d0d0d0)}:host([onDark]),:host([appearance=inverse]){--ds-auro-radio-group-label-color: var(--ds-basic-color-texticon-inverse, #ffffff)}:host([onDark][disabled]),:host([appearance=inverse][disabled]){--ds-auro-radio-group-label-color: var(--ds-basic-color-texticon-inverse-disabled, #7e8894)}`;class d extends h{constructor(){super(),this.appearance="default",this.disabled=!1,this.horizontal=!1,this.required=!1,this.validity=void 0,this.value=void 0,this.optionSelected=void 0,this.onDark=!1,this.touched=!1,this.hasLegend=!1,this.validation=new u,this.index=0,this.max=3,this.runtimeUtils=new r;const e=new p;this.helpTextTag=e.generateTag("auro-formkit-radio-helptext",f,m)}static get styles(){return[g,b,c]}static get properties(){return{appearance:{type:String,reflect:!0},disabled:{type:Boolean,reflect:!0},horizontal:{type:Boolean},error:{type:String,reflect:!0},value:{type:String},noValidate:{type:Boolean,reflect:!0},onDark:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},setCustomValidity:{type:String},setCustomValidityCustomError:{type:String},setCustomValidityValueMissing:{type:String},validity:{type:String,reflect:!0},optionSelected:{type:Object},touched:{type:Boolean,reflect:!0,attribute:!1},hasLegend:{type:Boolean,reflect:!1,attribute:!1}}}static register(e="auro-radio-group"){r.prototype.registerComponent(e,d)}connectedCallback(){super.connectedCallback(),this.handleItems(),this.addEventListener("toggleSelected",this.handleToggleSelected),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("resetRadio",this.resetRadio),this.addEventListener("auroRadio-blur",this.handleRadioBlur),this.addEventListener("auroRadio-selected",this.handleSelection)}firstUpdated(){this.runtimeUtils.handleComponentTagRename(this,"auro-radio-group")}handleSelection(e){e.target.value!==null&&e.target.value!==void 0?this.value=e.target.value:this.value="",this.optionSelected=e.target,this.validation.validate(this,this.optionSelected!==void 0)}handleRadioBlur(){this.touched=!0,this.validation.validate(this)}updated(e){e.has("disabled")&&(this.disabled||this.items.every(t=>t.disabled))&&this.items.forEach(t=>{t.disabled=this.disabled}),e.has("value")&&this.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0,composed:!0})),e.has("required")&&this.items.forEach(t=>{t.required=this.required}),e.has("onDark")&&this.items.forEach(t=>{t.onDark=this.onDark}),e.has("appearance")&&this.items.forEach(t=>{t.appearance=this.appearance}),e.has("error")&&this.validate(!0),e.has("validity")&&(this.validity&&this.validity!=="valid"?(this.setAttribute("aria-invalid","true"),this.items.forEach(t=>{t.setAttribute("error",!0)})):(this.removeAttribute("aria-invalid"),this.items.forEach(t=>{t.removeAttribute("error")})))}reset(){this.index=0,this.querySelectorAll("auro-radio, [auro-radio]").forEach(t=>{t.reset()}),this.validation.reset(this)}validate(e=!1){this.validation.validate(this,e)}resetRadio(){this.items.length===0&&this.handleItems()}handleItems(){this.items=[...this.querySelectorAll(":scope auro-radio, :scope [auro-radio]")],this.initializeIndex(),this.disabled&&this.items.forEach(e=>{e.disabled=this.disabled}),this.items.forEach(e=>{e.required=this.required,e.error=!!this.error})}handleSlotChange(){this.handleItems()}handleLegendSlotChange(){const e=this.shadowRoot.querySelector('slot[name="legend"]');e&&(this.hasLegend=e.assignedNodes().length>0)}initializeIndex(){if(!this.disabled&&this.items&&this.items.length>0){const e=this.items.findIndex(i=>i.hasAttribute("checked")&&!i.hasAttribute("disabled")),t=this.items.findIndex(i=>!i.hasAttribute("disabled"));this.index=e>=0?e:t,this.items[this.index]&&this.items[this.index].setAttribute("tabindex",0)}}handleToggleSelected(e){this.index=this.items.indexOf(e.target),this.items.forEach(t=>{t.checked=t===e.target}),this.value=e.target.value,this.optionSelected=e.target,this.validation.validate(this)}selectItem(e){const t=this.items[e];t.click(),t.focus(),this.index=e}selectNextItem(e,t){let i=e;for(i;i<this.items.length;t==="Down"?i+=1:i-=1){i=i===-1?this.items.length-1:i;const s=this.items[i];if(s){if(this.disabled||this.items.every(n=>n.disabled===!0)){s.focus();break}if(!s.disabled){s.click(),s.focus(),this.index=i;break}}}}handleKeyDown(e){switch(e.key){case" ":e.preventDefault(),this.selectItem(this.index);break;case"Down":case"ArrowDown":case"Right":case"ArrowRight":e.preventDefault(),this.selectNextItem(this.index===this.items.length-1?0:this.index+1,"Down");break;case"Up":case"ArrowUp":case"Left":case"ArrowLeft":e.preventDefault(),this.selectNextItem(this.index===0?this.items.length-1:this.index-1,"Up");break}}render(){const e={displayFlex:this.horizontal&&this.items.length<=this.max},t={hidden:!this.hasLegend&&this.required};return a`
      <fieldset class="${o(e)}" part="radio-group" role="radiogroup">
        <legend class="${o(t)}">
          <slot name="legend" @slotchange=${this.handleLegendSlotChange}></slot>
          ${this.required?void 0:a`<slot name="optionalLabel"> (optional)</slot>`}
        </legend>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </fieldset>

      ${!this.validity||this.validity===void 0||this.validity==="valid"?a`
          <${this.helpTextTag} appearance="${this.onDark?"inverse":this.appearance}" part="helpText">
            <slot name="helpText"></slot>
          </${this.helpTextTag}>`:a`
          <${this.helpTextTag} appearance="${this.onDark?"inverse":this.appearance}" role="alert" error aria-live="assertive" part="helpText">
            ${this.errorMessage}
          </${this.helpTextTag}>`}
    `}}export{d as A};
