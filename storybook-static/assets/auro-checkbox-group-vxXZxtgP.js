import{i as a,a as l}from"./lit-element-CzkqXGGu.js";import{A as s,e as n,u as i}from"./static-CzM4uoyW.js";import{A as h}from"./validation-DrYD_Tc9.js";import{A as c,f as u,a as d}from"./version-CcLPgAjI.js";import{t as p}from"./auro-checkbox-BGfBNh4K.js";const f=a`:host{display:block;padding-bottom:var(--ds-size-150, 0.75rem)}.displayFlex legend+slot{display:flex;white-space:nowrap}fieldset{all:unset}legend{margin-bottom:var(--ds-size-150, 0.75rem)}[auro-helptext]{margin-top:var(--ds-size-150, 0.75rem)}`,v=a`:host{color:var(--ds-auro-checkbox-group-text-color)}:host([disabled]){--ds-auro-checkbox-group-text-color: var(--ds-basic-color-texticon-disabled, #d0d0d0)}:host([onDark]),:host([appearance=inverse]){--ds-auro-checkbox-group-text-color: var(--ds-basic-color-texticon-inverse, #ffffff)}:host([onDark][disabled]),:host([appearance=inverse][disabled]){--ds-auro-checkbox-group-text-color: var(--ds-basic-color-texticon-inverse-disabled, #7e8894)}`;class r extends l{constructor(){super(),this.appearance="default",this.validity=void 0,this.disabled=void 0,this.required=!1,this.horizontal=!1,this.onDark=!1,this.touched=!1,this.value=void 0,this.index=0,this.maxNumber=3,this.validation=new h,this.runtimeUtils=new s;const e=new c;this.helpTextTag=e.generateTag("auro-formkit-checkbox-helptext",u,d)}static get styles(){return[f,v,p]}static get properties(){return{...super.properties,appearance:{type:String,reflect:!0},disabled:{type:Boolean,reflect:!0},error:{type:String,reflect:!0},horizontal:{type:Boolean,reflect:!0},noValidate:{type:Boolean,reflect:!0},onDark:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},setCustomValidity:{type:String},setCustomValidityCustomError:{type:String},setCustomValidityValueMissing:{type:String},validity:{type:String,reflect:!0}}}static register(e="auro-checkbox-group"){s.prototype.registerComponent(e,r)}connectedCallback(){super.connectedCallback(),this.handleItems()}handleValueUpdate(e,t){if(t)this.value.includes(e)||this.value.push(e);else if(this.value.indexOf(e)>-1){const o=this.value.indexOf(e);this.value.splice(o,1)}this.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!1,composed:!0})),this.validate(!0)}firstUpdated(){this.runtimeUtils.handleComponentTagRename(this,"auro-checkbox-group");const e=function(t){document.auroCheckboxGroupActive&&!document.auroCheckboxGroupActive.contains(t.target)&&(document.auroCheckboxGroupActive.focusWithin=!1,window.removeEventListener("focusin",e),document.removeEventListener("click",e),document.auroCheckboxGroupActive.validation.validate(document.auroCheckboxGroupActive))};this.addEventListener("auroCheckbox-focusin",()=>{this.touched=!0,this.value||(this.value=[]),this.focusWithin||document.addEventListener("click",e),this.focusWithin=!0}),this.addEventListener("auroCheckbox-focusout",()=>{document.auroCheckboxGroupActive=this,this.focusWithin?window.addEventListener("focusin",e):this.focusWithin=!0}),this.addEventListener("auroCheckbox-input",t=>{this.handleValueUpdate(t.target.value,t.target.checked)})}handlePreselectedItems(){let e=!1;this.checkboxes.forEach(t=>{t.hasAttribute("checked")&&this.value===void 0&&(e=!0)}),e&&(this.value||(this.value=[]),this.checkboxes.forEach(t=>{this.handleValueUpdate(t.getAttribute("value"),!!t.hasAttribute("checked"))}))}handleItems(){const e=this.tagName.toLowerCase(),t=e.substring(0,e.indexOf("-group"));this.checkboxes=Array.from(this.querySelectorAll(t)),this.handlePreselectedItems(),this.validate()}reset(){this.checkboxes.forEach(e=>{e.reset()}),this.validation.reset(this)}updated(e){e.has("layout")&&this.checkboxes.forEach(t=>{t.layout=this.layout}),e.has("disabled")&&this.checkboxes.forEach(t=>{this.disabled?t.setAttribute("disabled",!0):t.removeAttribute("disabled")}),e.has("validity")&&this.checkboxes.forEach(t=>{this.validity&&this.validity!=="valid"?t.setAttribute("error",!0):t.removeAttribute("error")}),e.has("required")&&(this.required?this.setAttribute("aria-required",!0):this.removeAttribute("aria-required")),e.has("onDark")&&this.checkboxes.forEach(t=>{t.onDark=this.onDark}),e.has("appearance")&&this.checkboxes.forEach(t=>{t.appearance=this.appearance}),e.has("error")&&(this.error?this.setAttribute("aria-invalid",!0):this.removeAttribute("aria-invalid"),this.validate(!0))}validate(e=!1){this.validation.validate(this,e)}render(){const e={displayFlex:this.horizontal&&this.checkboxes.length<=this.maxNumber};return i`
      <fieldset class="${n(e)}">
        <legend>
          <slot name="legend"></slot>
          ${this.required?void 0:i`<slot name="optionalLabel"> (optional)</slot>`}
        </legend>
        <slot @slotchange=${this.handleItems}></slot>
      </fieldset>

      ${!this.validity||this.validity===void 0||this.validity==="valid"?i`
          <${this.helpTextTag} part="helpText" appearance="${this.onDark?"inverse":this.appearance}">
            <slot name="helpText"></slot>
          </${this.helpTextTag}>`:i`
          <${this.helpTextTag} error appearance="${this.onDark?"inverse":this.appearance}"" role="alert" aria-live="assertive" part="helpText">
            ${this.errorMessage}
          </${this.helpTextTag}>`}
    `}}export{r as A};
