import{A as c}from"./static-CzM4uoyW.js";class v{constructor(){this.parseDate=(t,r="mm/dd/yyyy")=>{if(!t)return;const a="/",i=t.split(a),e=r.split(a);if(i.length!==e.length)throw new Error("AuroDatepickerUtilities | parseDate: Date string and format length do not match");const s=e.reduce((o,n,u)=>{const d=i[u];return/m/iu.test(n)?o.month=d:/d/iu.test(n)?o.day=d:/y/iu.test(n)&&(o.year=d),o},{});if(s.month&&s.year)return s;throw new Error("AuroDatepickerUtilities | parseDate: Unable to parse date string")},this.getDateAsString=(t,r=void 0)=>t.toLocaleDateString(r,{year:"numeric",month:"2-digit",day:"2-digit"}),this.toNorthAmericanFormat=(t,r)=>{if(r==="mm/dd/yyyy")return t;const a=this.parseDate(t,r);if(!a)throw new Error("AuroDatepickerUtilities | toNorthAmericanFormat: Unable to parse date string");const{month:i,day:e,year:s}=a,o=[];return i&&o.push(i),e&&o.push(e),s&&o.push(s),o.join("/")}}}const h=new v,l={maxDay:31,maxMonth:12,maxYear:2400,minDay:1,minMonth:1,minYear:1900};class p{get maxDay(){return l.maxDay}get maxMonth(){return l.maxMonth}get maxYear(){return l.maxYear}get minDay(){return l.minDay}get minMonth(){return l.minMonth}get minYear(){return l.minYear}}class M extends p{getCentury(){return String(new Date().getFullYear()).slice(0,2)}getFourDigitYear(t){const r=String(t).trim();return r.length<=2?this.getCentury()+r:r}constructor(){super(),this.datesMatch=(t,r)=>new Date(t).getTime()===new Date(r).getTime(),this.validDateStr=(t,r)=>{const a=r.length;if(typeof t>"u"||typeof r>"u")throw new Error("AuroDatepickerUtilities | validateDateStr: Date and format are required");if(typeof t!="string")throw new Error("AuroDatepickerUtilities | validateDateStr: Date must be a string");if(typeof r!="string")throw new Error("AuroDatepickerUtilities | validateDateStr: Format must be a string");if(t.length!==a)return!1;const i=h.parseDate(t,r);if(!i)return!1;const e=`${i.month}/${i.day||"01"}/${this.getFourDigitYear(i.year)}`,s=new Date(this.getFourDigitYear(i.year),i.month-1,i.day||1),o=h.getDateAsString(s,"en-US");return e===o},this.dateAndFormatMatch=(t,r)=>{if(!t||!r)throw new Error("AuroFormValidation | dateFormatMatch: value and format are required");if(t.length!==r.length)return!1;const a=h.parseDate(t,r),i=u=>{if(!a.day)return!0;if(!u)return!1;const d=Number.parseInt(u,10);if(Number.isNaN(d))throw new Error("AuroDatepickerUtilities | dayValueIsValid: Unable to parse day value integer");return!(d<this.minDay||d>this.maxDay)},e=u=>{if(!u)return!1;const d=Number.parseInt(u,10);if(Number.isNaN(d))throw new Error("AuroDatepickerUtilities | monthValueIsValid: Unable to parse month value integer");return!(d<this.minMonth||d>this.maxMonth)},s=u=>{if(!u)return!1;const d=this.getFourDigitYear(u),f=Number.parseInt(d,10);if(Number.isNaN(f))throw new Error("AuroDatepickerUtilities | yearValueIsValid: Unable to parse year value integer");return!(f<this.minYear||f>this.maxYear)};return!![e(a.month),i(a.day),s(a.year)].every(u=>u===!0)}}}const D=new M,{datesMatch:E,validDateStr:b,dateAndFormatMatch:m,minDay:A,minMonth:w,minYear:C,maxDay:U,maxMonth:x,maxYear:I}=D,{toNorthAmericanFormat:y,parseDate:F,getDateAsString:S}=h;class N{constructor(){this.runtimeUtils=new c}reset(t){t.validity=void 0,t.value=void 0,t.touched=!1,t.valueEnd&&(t.valueEnd=void 0),t.optionSelected&&(t.optionSelected=void 0),this.validate(t)}validateElementAttributes(t){const r={input:{length:[{check:i=>{var e,s;return((e=i.value)==null?void 0:e.length)>0&&((s=i.value)==null?void 0:s.length)<i.minLength},validity:"tooShort",message:i=>i.getAttribute("setCustomValidityTooShort")||i.setCustomValidity||""},{check:i=>{var e;return((e=i.value)==null?void 0:e.length)>i.maxLength},validity:"tooLong",message:i=>i.getAttribute("setCustomValidityTooLong")||i.setCustomValidity||""}],pattern:[{check:i=>i.pattern&&!new RegExp(`^${i.pattern}$`,"u").test(i.value),validity:"patternMismatch",message:i=>i.getAttribute("setCustomValidityPatternMismatch")||i.setCustomValidity||""}]},counter:{range:[{check:i=>i.max!==void 0&&Number(i.max)<Number(i.value),validity:"rangeOverflow",message:i=>i.getAttribute("setCustomValidityRangeOverflow")||""},{check:i=>i.min!==void 0&&Number(i.min)>Number(i.value),validity:"rangeUnderflow",message:i=>i.getAttribute("setCustomValidityRangeUnderflow")||""}]},combobox:{filter:[{check:i=>{if(i.behavior!=="filter")return!1;const e=i.input.value;return e?!!(!i.optionSelected||!i.value||i.optionSelected.value!==i.value||e&&e!==i.optionSelected.value||e&&e!==i.value):!1},validity:"valueMissing",message:i=>i.getAttribute("setCustomValidityValueMissingFilter")||i.setCustomValidity||""}]}};let a;if(this.runtimeUtils.elementMatch(t,"auro-input")?a="input":this.runtimeUtils.elementMatch(t,"auro-counter")||this.runtimeUtils.elementMatch(t,"auro-counter-group")?a="counter":this.runtimeUtils.elementMatch(t,"auro-combobox")&&(a="combobox"),a){const i=r[a];i&&Object.values(i).flat().forEach(e=>{e.check(t)&&(t.validity=e.validity,t.errorMessage=e.message(t))})}}validateType(t){var r,a,i,e,s,o;if(t.hasAttribute("type")){if(t.type==="email"){const n=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;if(!t.value.match(n)){t.validity="patternMismatch",t.errorMessage=t.setCustomValidityForType||t.setCustomValidity||"";return}}else if(t.type==="credit-card"){if(t.value.length>0&&t.value.length<t.validationCCLength){t.validity="tooShort",t.errorMessage=t.setCustomValidityForType||t.setCustomValidity||"";return}}else if(t.type==="number"){if(t.max!==void 0&&Number(t.max)<Number(t.value)){t.validity="rangeOverflow",t.errorMessage=t.setCustomValidityRangeOverflow||t.setCustomValidity||"";return}if(t.min!==void 0&&((r=t.value)==null?void 0:r.length)>0&&Number(t.min)>Number(t.value)){t.validity="rangeUnderflow",t.errorMessage=t.setCustomValidityRangeUnderflow||t.setCustomValidity||"";return}}else if(t.type==="date"&&((a=t.value)==null?void 0:a.length)>0){if(((i=t.value)==null?void 0:i.length)<t.lengthForType){t.validity="tooShort",t.errorMessage=t.setCustomValidityForType||t.setCustomValidity||"";return}if(((e=t.value)==null?void 0:e.length)>t.lengthForType){t.validity="tooLong",t.errorMessage=t.setCustomValidityForType||t.setCustomValidity||"";return}if(!m(t.value,t.format)){t.validity="patternMismatch",t.errorMessage=t.setCustomValidityForType||t.setCustomValidity||"Invalid Date Format Entered";return}if(!b(t.value,t.format)){t.validity="invalidDate",t.errorMessage=t.setCustomValidityInvalidDate||t.setCustomValidity||"Invalid Date Entered";return}const n=y(t.value,t.format),u=new Date(n);if(((s=t.max)==null?void 0:s.length)===t.lengthForType){const d=new Date(y(t.max,t.format));if(u>d){t.validity="rangeOverflow",t.errorMessage=t.setCustomValidityRangeOverflow||t.setCustomValidity||"";return}}if(((o=t.min)==null?void 0:o.length)===t.lengthForType){const d=new Date(y(t.min,t.format));if(u<d){t.validity="rangeUnderflow",t.errorMessage=t.setCustomValidityRangeUnderflow||t.setCustomValidity||"";return}}}}}validate(t,r){var i,e,s,o;this.getInputElements(t),this.getAuroInputs(t);let a=r||t.validateOnInput||!t.contains(document.activeElement)&&!((i=document.activeElement.shadowRoot)!=null&&i.contains(t))&&(t.touched||!t.touched&&typeof t.value<"u");if(t.hasAttribute("error"))t.validity="customError",t.errorMessage=t.setCustomValidityCustomError||t.error||t.setCustomValidity||"",a=!1;else if(a){t.validity="valid",t.errorMessage="";let n=!1;typeof t.value=="string"&&(n=t.value&&t.value.length>0),typeof t.value=="boolean"&&(n=t.value||t.value===!1),typeof t.value=="number"&&(n=!isNaN(t.value)&&t.value!==null),Array.isArray(t.value)&&(n=!!(t.value.length>0&&t.value.some(d=>typeof d=="string"&&d.length>0))),((e=this.auroInputElements)==null?void 0:e.length)===2&&(!this.auroInputElements[1].value||this.auroInputElements[1].length===0)&&(n=!1);const u=this.runtimeUtils.elementMatch(t,"auro-combobox");u&&(!t.persistInput||t.behavior==="filter")&&(n=((s=t.input.value)==null?void 0:s.length)>0),!n&&t.required&&t.touched?(t.validity="valueMissing",t.errorMessage=t.setCustomValidityValueMissing||t.setCustomValidity||""):n&&this.runtimeUtils.elementMatch(t,"auro-input")?(this.validateType(t),this.validateElementAttributes(t)):n&&(this.runtimeUtils.elementMatch(t,"auro-counter")||this.runtimeUtils.elementMatch(t,"auro-counter-group"))?this.validateElementAttributes(t):u&&(this.validateElementAttributes(t),a=t.behavior!=="filter")}if(((o=this.auroInputElements)==null?void 0:o.length)>0&&t.validity!=="valueMissing"){const n=this.runtimeUtils.elementMatch(t,"auro-combobox");(!n||n&&!t.persistInput)&&(this.auroInputElements.forEach(u=>u.validate()),t.validity=this.auroInputElements[0].validity,t.errorMessage=this.auroInputElements[0].errorMessage),t.validity==="valid"&&this.auroInputElements.length>1&&!n&&(t.validity=this.auroInputElements[1].validity,t.errorMessage=this.auroInputElements[1].errorMessage)}(a||t.hasAttribute("error"))&&(t.validity&&t.validity!=="valid"&&t.ValidityMessageOverride&&(t.errorMessage=t.ValidityMessageOverride),this.getErrorMessage(t)),t.dispatchEvent(new CustomEvent("auroFormElement-validated",{bubbles:!0,composed:!0,detail:{validity:t.validity,message:t.errorMessage}}))}getInputElements(t){this.inputElements=t.renderRoot.querySelectorAll("input")}getAuroInputs(t){this.auroInputElements=t.shadowRoot.querySelectorAll("auro-input, [auro-input]")}getErrorMessage(t){var r,a,i,e;if(t.validity!=="valid"){if(t.setCustomValidity)t.errorMessage=t.setCustomValidity;else if(this.runtimeUtils.elementMatch(t,"auro-input")&&t.errorMessage===""){const s=t.renderRoot.querySelector("input");s.validationMessage.length>0&&(t.errorMessage=s.validationMessage)}else if(this.runtimeUtils.elementMatch(t,"auro-combobox")&&t.errorMessage==="")t.errorMessage=(a=(r=t.input)==null?void 0:r.inputElement)==null?void 0:a.validationMessage;else if(((i=this.inputElements)==null?void 0:i.length)>0&&t.errorMessage===""){const s=this.inputElements[0];if(s.validationMessage.length>0)t.errorMessage=s.validationMessage;else if(((e=this.inputElements)==null?void 0:e.length)===2){const o=this.inputElements[1];o.validationMessage.length>0&&(t.errorMessage=o.validationMessage)}}}else t.errorMessage=""}}export{N as A};
